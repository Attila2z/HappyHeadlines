# =============================================================================
# nginx/nginx.conf
# =============================================================================
# This configures nginx as a LOAD BALANCER (X-axis split).
#
# HOW IT WORKS:
#   - "upstream" defines the pool of 3 app instances
#   - nginx uses round-robin by default:
#     Request 1 → app1
#     Request 2 → app2
#     Request 3 → app3
#     Request 4 → app1 (starts over)
# =============================================================================

upstream articleservice {
    server app1:8080;
    server app2:8080;
    server app3:8080;
}

server {
    listen 80;

    location / {
        proxy_pass         http://articleservice;
        proxy_http_version 1.1;
        proxy_set_header   Host $host;
        proxy_set_header   X-Real-IP $remote_addr;
    }
}